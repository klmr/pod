<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Import a module or package — importing • box</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Import a module or package — importing" />
<meta property="og:description" content="Actual implementation of the import process" />
<meta property="og:image" content="http://klmr.me/box/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">box</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/box.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">General topics</li>
    <li>
      <a href="../articles/faq.html">Frequently asked questions</a>
    </li>
    <li>
      <a href="../articles/testing.html">Testing modules</a>
    </li>
    <li>
      <a href="../articles/compiled-code.html">Using compiled code</a>
    </li>
    <li>
      <a href="../articles/migration.html">Migration guide for version 1.0</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Implementation details</li>
    <li>
      <a href="../articles/mod-env-hierarchy.html">The hierarchy of module environments</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/klmr/box">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Import a module or package</h1>
    
    <div class="hidden name"><code>importing.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Actual implementation of the import process</p>
    </div>

    <pre class="usage"><span class='fu'>use_one</span>(<span class='no'>declaration</span>, <span class='no'>alias</span>, <span class='no'>caller</span>)

<span class='fu'>load_and_register</span>(<span class='no'>spec</span>, <span class='no'>info</span>, <span class='no'>caller</span>)

<span class='fu'>register_as_import</span>(<span class='no'>spec</span>, <span class='no'>info</span>, <span class='no'>mod_ns</span>, <span class='no'>caller</span>)

<span class='fu'>defer_import_finalization</span>(<span class='no'>spec</span>, <span class='no'>info</span>, <span class='no'>mod_ns</span>, <span class='no'>caller</span>)

<span class='fu'>finalize_deferred</span>(<span class='no'>info</span>)

<span class='fu'>export_and_attach</span>(<span class='no'>spec</span>, <span class='no'>info</span>, <span class='no'>mod_ns</span>, <span class='no'>caller</span>)

<span class='fu'>load_from_source</span>(<span class='no'>info</span>, <span class='no'>mod_ns</span>)

<span class='fu'>load_mod</span>(<span class='no'>info</span>)

<span class='fu'>mod_exports</span>(<span class='no'>info</span>, <span class='no'>spec</span>, <span class='no'>mod_ns</span>)

<span class='fu'>mod_export_names</span>(<span class='no'>info</span>, <span class='no'>mod_ns</span>)

<span class='fu'>attach_to_caller</span>(<span class='no'>spec</span>, <span class='no'>info</span>, <span class='no'>mod_exports</span>, <span class='no'>mod_ns</span>, <span class='no'>caller</span>)

<span class='fu'>attach_list</span>(<span class='no'>spec</span>, <span class='no'>exports</span>)

<span class='fu'>assign_alias</span>(<span class='no'>spec</span>, <span class='no'>mod_exports</span>, <span class='no'>caller</span>)

<span class='fu'>assign_temp_alias</span>(<span class='no'>spec</span>, <span class='no'>caller</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>declaration</th>
      <td><p>an unevaluated use declaration expression without the
surrounding <code>use</code> call</p></td>
    </tr>
    <tr>
      <th>alias</th>
      <td><p>the use alias, if given, otherwise <code>NULL</code></p></td>
    </tr>
    <tr>
      <th>caller</th>
      <td><p>the client’s calling environment (parent frame)</p></td>
    </tr>
    <tr>
      <th>spec</th>
      <td><p>a module use declaration specification</p></td>
    </tr>
    <tr>
      <th>info</th>
      <td><p>the physical module information</p></td>
    </tr>
    <tr>
      <th>mod_ns</th>
      <td><p>the module namespace environment of the newly loaded module</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>use_one</code> does not currently return a value. — This might change
in the future.</p>
<p><code>load_mod</code> returns the module or package namespace environment
of the specified module or package info.</p>
<p><code>mod_exports</code> returns an export environment containing the
exported names of a given module.</p>
<p><code>mode_export_names</code> returns a vector containing the same names as
<code>names(mod_exports(info, spec, mod_ns))</code> but does not create an export
environment.</p>
<p><code>attach_list</code> returns a named character vector of the names in
an attach specification. The vector’s names are the aliases, if provided, or
the attach specification names themselves otherwise.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>use_one</code> performs the actual import. It is invoked by <code>use</code> given
the calling context and unevaluated expressions as arguments, and only uses
standard evaluation.</p>
<p><code>load_and_register</code> performs the loading, attaching and exporting of a
module identified by its spec and info.</p>
<p><code>register_as_import</code> registers a <code>use</code> declaration in the calling
module so that it can be found later on, if the declaration is reexported by
the calling module.</p>
<p><code>defer_import_finalization</code> is called by <code>load_and_register</code> to
earmark a module for deferred initialization if it hasn’t been fully loaded
yet.</p>
<p><code>finalize_deferred</code> exports and attaches names from a module use
declaration which has been deferred due to being part of a cyclic loading
chain.</p>
<p><code>export_and_attach</code> exports and attaches names from a given module use
declaration.</p>
<p><code>load_from_source</code> loads a module source file into its newly created,
empty module namespace.</p>
<p><code>load_mod</code> tests whether a module or package was already loaded and, if
not, loads it.</p>
<p><code>mod_exports</code> returns an export environment containing a copy of the
module’s exported objects.</p>
<p><code>attach_to_caller</code> attaches the listed names of an attach specification
for a given use declaration to the calling environment.</p>
<p><code>assign_alias</code> creates a module/package object in calling environment,
unless it contains an attach declaration, and no explicit alias is given.</p>
<p><code>assign_temp_alias</code> creates a placeholder object for the module in the
calling environment, to be replaced by the actual module export environment
once the module is completely loaded (which happens in the case of cyclic
imports).</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If a module is still being loaded (because it is part of a cyclic
import chain), <code>load_and_register</code> earmarks the module for deferred
registration and holds off on attaching and exporting for now, since not all
its names are available yet.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://klmr.me'>Konrad Rudolph</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


